webpackJsonp([1],{0:function(t,e){},1:function(t,e){},G1q7:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW");function s(){var t=document.querySelector("html"),e=window.innerWidth/10;e=e>50?50:e,t.style.fontSize=e+"px"}document.addEventListener("DOMContentLoaded",function(){s()}),window.addEventListener("resize",function(){s()});var o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var a=n("VU/8")({name:"App"},o,!1,function(t){n("RKM8")},null,null).exports,r=n("/ocq"),c=n("VXRH"),l={props:{ifTitleAndMenuShow:{type:Boolean,default:!1}}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"slide-down"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:this.ifTitleAndMenuShow,expression:"ifTitleAndMenuShow"}],staticClass:"title-wrapper"},[e("div",{staticClass:"left"},[e("span",{staticClass:"icon-back icon"})]),this._v(" "),e("div",{staticClass:"right"},[e("div",{staticClass:"icon-wrapper"},[e("span",{staticClass:"icon-cart icon"})]),this._v(" "),e("div",{staticClass:"icon-wrapper"},[e("span",{staticClass:"icon-person icon"})]),this._v(" "),e("div",{staticClass:"icon-wrapper"},[e("span",{staticClass:"icon-more icon"})])])])])},staticRenderFns:[]};var u=n("VU/8")(l,h,!1,function(t){n("mF4U")},"data-v-3d48aa7f",null).exports,d={props:{navigation:Object,bookAvailable:Boolean,currentContent:Object},methods:{jumpTo:function(t){this.$emit("jumpTo",t)}}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"slide-right"}},[n("div",{staticClass:"content"},[t.bookAvailable?n("div",{staticClass:"content-wrapper"},t._l(t.navigation.toc,function(e,i){return n("div",{key:i,staticClass:"content-item"},[n("span",{staticClass:"text",class:{"selected-content":t.currentContent.tocIndex===i&&null===t.currentContent.subtocIndex},on:{click:function(n){t.jumpTo(e.href)}}},[t._v("\n          "+t._s(e.label)+"\n        ")]),t._v(" "),t._l(e.subitems,function(e,s){return n("div",{key:s,staticClass:"content-subitem"},[n("span",{staticClass:"text",class:{"selected-content":t.currentContent.tocIndex===i&&t.currentContent.subtocIndex===s},on:{click:function(n){t.jumpTo(e.href)}}},[t._v("\n            "+t._s(e.label)+"\n          ")])])})],2)})):n("div",{staticClass:"empty"},[t._v("加载中...")])])])},staticRenderFns:[]};var v={data:function(){return{ifSettingShow:!1,tagShow:0,progress:0,ifShowContent:!1}},components:{ContentView:n("VU/8")(d,f,!1,function(t){n("X2Si")},"data-v-0fb0915e",null).exports},props:{ifTitleAndMenuShow:{type:Boolean,default:!1},fontSizeList:Array,defaultFontSize:Number,defaultTheme:Number,bookAvailable:Boolean,themeList:Array,navigation:Object,currentContent:Object},methods:{jumpTo:function(t){this.$emit("jumpTo",t)},hideContent:function(){this.ifShowContent=!1},showContent:function(){this.ifShowContent=!0,this.hideSetting()},onProgressInput:function(t){this.progress=t,this.$refs.progressBar.style.backgroundSize=this.progress+"% 100%"},onProgressChange:function(t){this.$emit("onProgressChange",t)},showSetting:function(){this.ifSettingShow=!0},setTheme:function(t){this.$emit("setTheme",t)},toggleSetting:function(t){t===this.tagShow?this.ifSettingShow=!this.ifSettingShow:this.tagShow=t},hideSetting:function(){this.ifSettingShow=!1},setFontSize:function(t){this.$emit("setFontSize",t)}}},p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"menu-bar"},[n("transition",{attrs:{name:"slide-up"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.ifTitleAndMenuShow,expression:"ifTitleAndMenuShow"}],staticClass:"menu-wrapper",class:{"hide-box-shadow":t.ifSettingShow}},[n("div",{staticClass:"icon-wrapper",on:{click:t.showContent}},[n("span",{staticClass:"icon-menu icon"})]),t._v(" "),n("div",{staticClass:"icon-wrapper",on:{click:function(e){t.toggleSetting(2)}}},[n("span",{staticClass:"icon-progress icon"})]),t._v(" "),n("div",{staticClass:"icon-wrapper",on:{click:function(e){t.toggleSetting(1)}}},[n("span",{staticClass:"icon-bright icon"})]),t._v(" "),n("div",{staticClass:"icon-wrapper",on:{click:function(e){t.toggleSetting(0)}}},[n("span",{staticClass:"icon-a icon"},[t._v("A")])])])]),t._v(" "),n("transition",{attrs:{name:"slide-up"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.ifSettingShow,expression:"ifSettingShow"}],staticClass:"setting-wrapper"},[0===t.tagShow?n("div",{staticClass:"setting-font-size"},[n("div",{staticClass:"preview",style:{fontSize:t.fontSizeList[0].fontSize+"px"}},[t._v("A")]),t._v(" "),t._l(t.fontSizeList,function(e,i){return n("div",{key:i,staticClass:"select-wrapper",on:{click:function(n){t.setFontSize(e.fontSize)}}},[n("div",{staticClass:"line"}),t._v(" "),n("div",{staticClass:"point-wrapper"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.defaultFontSize===e.fontSize,expression:"defaultFontSize===item.fontSize"}],staticClass:"point"})]),t._v(" "),n("div",{staticClass:"line"})])}),t._v(" "),n("div",{staticClass:"preview",style:{fontSize:t.fontSizeList[t.fontSizeList.length-1].fontSize+"px"}},[t._v("A")])],2):1===t.tagShow?n("div",{staticClass:"setting-theme"},t._l(t.themeList,function(e,i){return n("div",{key:i,staticClass:"setting-theme-item",on:{click:function(e){t.setTheme(i)}}},[n("div",{staticClass:"preview",class:{border:"#ffffff"===e.style.body.background},style:{background:e.style.body.background}}),t._v(" "),n("div",{staticClass:"text",class:{selected:i===t.defaultTheme}},[t._v(t._s(e.name))])])})):2===t.tagShow?n("div",{staticClass:"setting-progress"},[n("div",{staticClass:"progress-wrapper"},[n("input",{ref:"progressBar",staticClass:"progress",attrs:{type:"range",min:"0",max:"100",step:"1",disabled:!t.bookAvailable},domProps:{value:t.progress},on:{change:function(e){t.onProgressChange(e.target.value)},input:function(e){t.onProgressInput(e.target.value)}}})]),t._v(" "),n("div",{staticClass:"text-wrapper"},[n("span",{staticClass:"num-percent"},[t._v(t._s(t.bookAvailable?t.progress+"%":"加载中..."))])])]):t._e()])]),t._v(" "),n("content-view",{directives:[{name:"show",rawName:"v-show",value:t.ifShowContent,expression:"ifShowContent"}],attrs:{ifShowContent:t.ifShowContent,navigation:t.navigation,currentContent:t.currentContent,bookAvailable:t.bookAvailable},on:{jumpTo:t.jumpTo}}),t._v(" "),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.ifShowContent,expression:"ifShowContent"}],staticClass:"content-mask",on:{click:t.hideContent}})])],1)},staticRenderFns:[]};var m={data:function(){return{navigation:{},ifTitleAndMenuShow:!1,fontSizeList:[{fontSize:12},{fontSize:14},{fontSize:16},{fontSize:18},{fontSize:20},{fontSize:22},{fontSize:24}],defaultFontSize:16,themeList:[{name:"默认",style:{body:{color:"#000",background:"#fff"}}},{name:"护眼",style:{body:{color:"#000",background:"#ceeaba"}}},{name:"夜间",style:{body:{color:"#ccc",background:"#000"}}},{name:"舒适",style:{body:{color:"#000",background:"rgb(241, 236, 226)"}}}],defaultTheme:0,bookAvailable:!1,currentContent:{tocIndex:0,subtocIndex:0}}},components:{TitleBar:u,MenuBar:n("VU/8")(v,p,!1,function(t){n("qsB5")},"data-v-702d7844",null).exports},methods:{jumpTo:function(t){var e=this;this.rendition.display(t).then(function(){e.ifTitleAndMenuShow=!1,e.$refs.menuBar.hideSetting(),e.$refs.menuBar.hideContent(),e.onContentChange(),e.setProcess()})},onProgressChange:function(t){var e=this,n=t/100,i=n>0?this.locations.cfiFromPercentage(n):0;this.rendition.display(i).then(function(){e.onContentChange()})},setFontSize:function(t){this.defaultFontSize=t,this.themes&&this.themes.fontSize(t+"px")},prevPage:function(){var t=this;this.rendition&&this.bookAvailable&&(this.rendition.prev().then(function(){t.onContentChange(),t.setProcess()}),this.ifTitleAndMenuShow=!1,this.$refs.menuBar.hideSetting())},toggleTitleAndMenu:function(){this.ifTitleAndMenuShow=!this.ifTitleAndMenuShow,this.ifTitleAndMenuShow||this.$refs.menuBar.hideSetting()},onContentChange:function(){var t=this.rendition.currentLocation();this.currentContent={tocIndex:this.navigation.tocByHref[t.start.href],subtocIndex:0}},setProcess:function(){var t=this.rendition.currentLocation(),e=this.locations.percentageFromCfi(t.start.cfi);this.$refs.menuBar.progress=100*e.toFixed(2),this.bookAvailable&&this.$refs.menuBar.$refs.progressBar&&this.$refs.menuBar.onProgressInput(this.$refs.menuBar.progress)},nextPage:function(){var t=this;this.rendition&&this.bookAvailable&&(this.rendition.next().then(function(){t.setProcess(),t.onContentChange()}),this.ifTitleAndMenuShow=!1,this.$refs.menuBar.hideSetting())},showEpub:function(){var t=this;this.book=new c.a("./static/sanguoyanyi.epub"),this.rendition=this.book.renderTo("read",{width:window.innerWidth,height:window.innerHeight}),this.rendition.display(),this.themes=this.rendition.themes,this.setFontSize(this.defaultFontSize),this.registerTheme(),this.setTheme(this.defaultTheme),this.book.ready.then(function(){return t.navigation=t.book.navigation,t.book.locations.generate()}).then(function(){t.locations=t.book.locations,t.setProcess(),t.onContentChange(),t.bookAvailable=!0})},registerTheme:function(){var t=this;this.themeList.forEach(function(e){t.themes.register(e.name,e.style)})},setTheme:function(t){this.defaultTheme=t,this.themes.select(this.themeList[t].name)}},mounted:function(){this.showEpub()}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ebook"},[n("title-bar",{attrs:{ifTitleAndMenuShow:t.ifTitleAndMenuShow}}),t._v(" "),n("div",{staticClass:"read-wrapper"},[n("div",{attrs:{id:"read"}}),t._v(" "),n("div",{staticClass:"mask"},[n("div",{staticClass:"left",on:{click:t.prevPage}}),t._v(" "),n("div",{staticClass:"content",on:{click:t.toggleTitleAndMenu}}),t._v(" "),n("div",{staticClass:"right",on:{click:t.nextPage}})])]),t._v(" "),n("menu-bar",{ref:"menuBar",attrs:{ifTitleAndMenuShow:t.ifTitleAndMenuShow,fontSizeList:t.fontSizeList,defaultFontSize:t.defaultFontSize,defaultTheme:t.defaultTheme,themeList:t.themeList,bookAvailable:t.bookAvailable,navigation:t.navigation,currentContent:t.currentContent},on:{setFontSize:t.setFontSize,setTheme:t.setTheme,onProgressChange:t.onProgressChange,jumpTo:t.jumpTo}})],1)},staticRenderFns:[]};var S=n("VU/8")(m,g,!1,function(t){n("ZrOs")},"data-v-385db258",null).exports;i.a.use(r.a);var w=new r.a({routes:[{path:"/",redirect:"/ebook"},{path:"/ebook",component:S}]});n("jYjM"),n("G1q7");i.a.config.productionTip=!1,new i.a({el:"#app",router:w,components:{App:a},template:"<App/>"})},RKM8:function(t,e){},X2Si:function(t,e){},ZrOs:function(t,e){},jYjM:function(t,e){},mF4U:function(t,e){},qsB5:function(t,e){}},["NHnr"]);